let e,t,n,i,o,r,s,d,l,a;var p="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},c={},g={},u=p.parcelRequire6c98;null==u&&((u=function(e){if(e in c)return c[e].exports;if(e in g){var t=g[e];delete g[e];var n={id:e,exports:{}};return c[e]=n,t.call(n.exports,n,n.exports),n.exports}var i=Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){g[e]=t},p.parcelRequire6c98=u);var w=(u("ilwiq"),u("ilwiq")),m=u("5Rd1x");class y extends m.OrbitControls{constructor(e,t){super(e,t),this.screenSpacePanning=!1,this.mouseButtons={LEFT:w.MOUSE.PAN,MIDDLE:w.MOUSE.DOLLY,RIGHT:w.MOUSE.ROTATE},this.touches={ONE:w.TOUCH.PAN,TWO:w.TOUCH.DOLLY_ROTATE}}}var f=u("7lx9d"),h=u("7ePFa"),x=u("kp7Te"),b=u("4CEV9"),T=u("jiuw3");let M=null;const v={displayModel:!1,regenerate:()=>{M=O()}};function*O(){let e,t,n;a.innerText="processing: --",l.visible=!1,s.visible=!1;let i=[];r.updateWorldMatrix(!0,!0),r.traverse(e=>{if(e.geometry){let t=e.geometry.clone();for(let n in t.applyMatrix4(e.matrixWorld),t.attributes)"position"!==n&&t.deleteAttribute(n);i.push(t)}});let o=(0,h.mergeGeometries)(i,!1);for(yield,(n=new b.SilhouetteGenerator).sortTriangles=!0,t=(e=n.generate(o,{onProgress:(e,t)=>{a.innerText=`processing: ${parseFloat((100*e).toFixed(2))}%`,l.geometry.dispose(),l.geometry=t.getGeometry(),l.visible=!0}})).next();!t.done;)t=e.next(),yield;for(l.geometry.dispose(),l.geometry=t.value,l.visible=!0,a.innerText="generating intersection edges...",(n=new b.ProjectionGenerator).angleThreshold=50,t=(e=n.generate(o,{onProgress:(e,t)=>{a.innerText=`processing: ${parseFloat((100*e).toFixed(2))}%`,s.geometry.dispose(),s.geometry=t.getLineGeometry(),s.visible=!0}})).next();!t.done;)t=e.next(),yield;s.geometry.dispose(),s.geometry=t.value,s.visible=!0,a.innerText=""}!async function(){a=document.getElementById("output"),(e=new w.WebGLRenderer({antialias:!0})).setPixelRatio(window.devicePixelRatio),e.setSize(window.innerWidth,window.innerHeight),e.setClearColor(1118481,1),document.body.appendChild(e.domElement),n=new w.Scene;let p=new w.DirectionalLight(16777215,3.5);p.position.set(1,2,3),n.add(p);let c=new w.AmbientLight(11583173,.5);n.add(c),d=new w.Group,n.add(d);let g=await new(0,f.GLTFLoader)().setMeshoptDecoder(x.MeshoptDecoder).loadAsync("https://raw.githubusercontent.com/gkjohnson/3d-demo-data/main/models/3d-home-layout/scene.glb");r=g.scene,d.updateMatrixWorld(!0);let u=new w.Box3;u.setFromObject(r,!0),u.getCenter(d.position).multiplyScalar(-1),d.position.y=Math.max(0,-u.min.y)+1,d.add(r),r.visible=!1,l=new w.Mesh(new w.BufferGeometry,new w.MeshBasicMaterial({color:"#eee",polygonOffset:!0,polygonOffsetFactor:3,polygonOffsetUnits:3,side:w.DoubleSide})),s=new w.LineSegments(new w.BufferGeometry,new w.LineBasicMaterial({color:197379})),n.add(s,l),(t=new w.PerspectiveCamera(75,window.innerWidth/window.innerHeight,.01,50)).position.setScalar(5.5),t.updateProjectionMatrix(),(o=new y(t,e.domElement)).zoomToCursor=!0,o.maxPolarAngle=Math.PI/3,M=O(),(i=new T.GUI).add(v,"displayModel"),i.add(v,"regenerate"),function i(){if(requestAnimationFrame(i),M){let e=M.next();e.done&&(M=null)}r.visible=v.displayModel,e.render(n,t)}(),window.addEventListener("resize",function(){t.aspect=window.innerWidth/window.innerHeight,t.updateProjectionMatrix(),e.setSize(window.innerWidth,window.innerHeight)},!1)}();
//# sourceMappingURL=floorProjection.6ab05ec7.js.map
