{"version":3,"file":"silhouetteProjection-yoHBcwKq.js","sources":["../../../src/worker/SilhouetteGeneratorWorker.js","../../silhouetteProjection.js"],"sourcesContent":["import { BufferAttribute, BufferGeometry } from 'three';\nimport { OUTPUT_BOTH } from '../SilhouetteGenerator';\n\nconst NAME = 'SilhouetteGeneratorWorker';\nexport class SilhouetteGeneratorWorker {\n\n\tconstructor() {\n\n\t\tthis.running = false;\n\t\tthis.worker = new Worker( new URL( './silhouetteAsync.worker.js', import.meta.url ), { type: 'module' } );\n\t\tthis.worker.onerror = e => {\n\n\t\t\tif ( e.message ) {\n\n\t\t\t\tthrow new Error( `${ NAME }: Could not create Web Worker with error \"${ e.message }\"` );\n\n\t\t\t} else {\n\n\t\t\t\tthrow new Error( `${ NAME }: Could not create Web Worker.` );\n\n\t\t\t}\n\n\t\t};\n\n\t}\n\n\tgenerate( geometry, options = {} ) {\n\n\t\tif ( this.running ) {\n\n\t\t\tthrow new Error( `${ NAME }: Already running job.` );\n\n\t\t}\n\n\t\tif ( this.worker === null ) {\n\n\t\t\tthrow new Error( `${ NAME }: Worker has been disposed.` );\n\n\t\t}\n\n\t\tconst { worker } = this;\n\t\tthis.running = true;\n\n\t\treturn new Promise( ( resolve, reject ) => {\n\n\t\t\tworker.onerror = e => {\n\n\t\t\t\treject( new Error( `${ NAME }: ${ e.message }` ) );\n\t\t\t\tthis.running = false;\n\n\t\t\t};\n\n\t\t\tworker.onmessage = e => {\n\n\t\t\t\tthis.running = false;\n\t\t\t\tconst { data } = e;\n\n\t\t\t\tif ( data.error ) {\n\n\t\t\t\t\treject( new Error( data.error ) );\n\t\t\t\t\tworker.onmessage = null;\n\n\t\t\t\t} else if ( data.result ) {\n\n\t\t\t\t\tif ( options.output === OUTPUT_BOTH ) {\n\n\t\t\t\t\t\tconst result = data.result.map( info => {\n\n\t\t\t\t\t\t\tconst geometry = new BufferGeometry();\n\t\t\t\t\t\t\tgeometry.setAttribute( 'position', new BufferAttribute( info.position, 3, false ) );\n\t\t\t\t\t\t\tif ( info.index ) {\n\n\t\t\t\t\t\t\t\tgeometry.setIndex( new BufferAttribute( info.index, 1, false ) );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\treturn geometry;\n\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t\tresolve( result );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tconst geometry = new BufferGeometry();\n\t\t\t\t\t\tgeometry.setAttribute( 'position', new BufferAttribute( data.result.position, 3, false ) );\n\t\t\t\t\t\tgeometry.setIndex( new BufferAttribute( data.result.index, 1, false ) );\n\t\t\t\t\t\tresolve( geometry );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tworker.onmessage = null;\n\n\t\t\t\t} else if ( options.onProgress ) {\n\n\t\t\t\t\toptions.onProgress( data.progress );\n\n\t\t\t\t}\n\n\t\t\t};\n\n\t\t\tconst index = geometry.index ? geometry.index.array.slice() : null;\n\t\t\tconst position = geometry.attributes.position.array.slice();\n\t\t\tconst transfer = [ position.buffer ];\n\t\t\tif ( index ) {\n\n\t\t\t\ttransfer.push( index.buffer );\n\n\t\t\t}\n\n\t\t\tworker.postMessage( {\n\t\t\t\tindex,\n\t\t\t\tposition,\n\t\t\t\toptions: {\n\t\t\t\t\t...options,\n\t\t\t\t\tonProgress: null,\n\t\t\t\t\tincludedProgressCallback: Boolean( options.onProgress ),\n\t\t\t\t},\n\t\t\t}, transfer );\n\n\t\t} );\n\n\t}\n\n\tdispose() {\n\n\t\tthis.worker.terminate();\n\t\tthis.worker = null;\n\n\t}\n\n}\n","import {\n\tBox3,\n\tWebGLRenderer,\n\tScene,\n\tDirectionalLight,\n\tAmbientLight,\n\tGroup,\n\tMeshStandardMaterial,\n\tMeshBasicMaterial,\n\tPerspectiveCamera,\n\tMesh,\n\tTorusKnotGeometry,\n\tDoubleSide,\n\tLineSegments,\n\tLineBasicMaterial,\n} from 'three';\nimport { GUI } from 'three/examples/jsm/libs/lil-gui.module.min.js';\nimport { OrbitControls } from 'three/examples/jsm/controls/OrbitControls.js';\nimport { mergeGeometries } from 'three/examples/jsm/utils/BufferGeometryUtils.js';\nimport { OUTPUT_BOTH, SilhouetteGenerator } from '../src';\nimport { SilhouetteGeneratorWorker } from '../src/worker/SilhouetteGeneratorWorker.js';\n\nconst params = {\n\tdisplaySilhouette: true,\n\tdisplayWireframe: false,\n\tdisplayOutline: false,\n\tdisplayModel: true,\n\tuseWorker: false,\n\trotate: () => {\n\n\t\tgroup.quaternion.random();\n\t\tgroup.position.set( 0, 0, 0 );\n\t\tgroup.updateMatrixWorld( true );\n\n\t\tconst box = new Box3();\n\t\tbox.setFromObject( model, true );\n\t\tbox.getCenter( group.position ).multiplyScalar( - 1 );\n\t\tgroup.position.y = Math.max( 0, - box.min.y ) + 1;\n\n\t},\n\tregenerate: () => {\n\n\t\ttask = updateEdges();\n\n\t},\n};\n\nlet renderer, camera, scene, gui, controls;\nlet model, projection, projectionWireframe, group, edges;\nlet outputContainer;\nlet worker;\nlet task = null;\n\ninit();\n\nasync function init() {\n\n\toutputContainer = document.getElementById( 'output' );\n\n\tconst bgColor = 0xeeeeee;\n\n\t// renderer setup\n\trenderer = new WebGLRenderer( { antialias: true } );\n\trenderer.setPixelRatio( window.devicePixelRatio );\n\trenderer.setSize( window.innerWidth, window.innerHeight );\n\trenderer.setClearColor( bgColor, 1 );\n\tdocument.body.appendChild( renderer.domElement );\n\n\t// scene setup\n\tscene = new Scene();\n\n\t// lights\n\tconst light = new DirectionalLight( 0xffffff, 3.5 );\n\tlight.position.set( 1, 2, 3 );\n\tscene.add( light );\n\n\tconst ambientLight = new AmbientLight( 0xb0bec5, 0.5 );\n\tscene.add( ambientLight );\n\n\t// load model\n\tgroup = new Group();\n\tgroup.position.y = 2;\n\tscene.add( group );\n\n\tmodel = new Mesh( new TorusKnotGeometry( 1, 0.4, 120, 30 ), new MeshStandardMaterial( {\n\t\tpolygonOffset: true,\n\t\tpolygonOffsetFactor: 1,\n\t\tpolygonOffsetUnits: 1,\n\t} ) );\n\tmodel.rotation.set( Math.PI / 4, 0, Math.PI / 8 );\n\tgroup.add( model );\n\n\t// create projection display mesh\n\tprojection = new Mesh( undefined, new MeshBasicMaterial( {\n\t\tcolor: 0xf06292,\n\t\tside: DoubleSide,\n\t\tpolygonOffset: true,\n\t\tpolygonOffsetFactor: 1,\n\t\tpolygonOffsetUnits: 1,\n\t} ) );\n\tprojection.position.y = - 2;\n\tscene.add( projection );\n\n\tedges = new LineSegments( undefined, new LineBasicMaterial( { color: 0 } ) );\n\tedges.position.y = - 2;\n\tscene.add( edges );\n\n\tprojectionWireframe = new Mesh( undefined, new MeshBasicMaterial( { color: 0xc2185b, wireframe: true } ) );\n\tprojectionWireframe.position.y = - 2;\n\tscene.add( projectionWireframe );\n\n\t// camera setup\n\tcamera = new PerspectiveCamera( 75, window.innerWidth / window.innerHeight, 0.01, 50 );\n\tcamera.position.setScalar( 4.5 );\n\tcamera.updateProjectionMatrix();\n\n\t// controls\n\tcontrols = new OrbitControls( camera, renderer.domElement );\n\n\tgui = new GUI();\n\tgui.add( params, 'displayModel' );\n\tgui.add( params, 'displaySilhouette' );\n\tgui.add( params, 'displayOutline' );\n\tgui.add( params, 'displayWireframe' );\n\tgui.add( params, 'useWorker' );\n\tgui.add( params, 'rotate' );\n\tgui.add( params, 'regenerate' );\n\n\tworker = new SilhouetteGeneratorWorker();\n\n\ttask = updateEdges();\n\n\trender();\n\n\twindow.addEventListener( 'resize', function () {\n\n\t\tcamera.aspect = window.innerWidth / window.innerHeight;\n\t\tcamera.updateProjectionMatrix();\n\n\t\trenderer.setSize( window.innerWidth, window.innerHeight );\n\n\t}, false );\n\n}\n\nfunction* updateEdges( runTime = 30 ) {\n\n\toutputContainer.innerText = 'processing: --';\n\n\t// transform and merge geometries to project into a single model\n\tlet timeStart = window.performance.now();\n\tconst geometries = [];\n\tmodel.updateWorldMatrix( true, true );\n\tmodel.traverse( c => {\n\n\t\tif ( c.geometry ) {\n\n\t\t\tconst clone = c.geometry.clone();\n\t\t\tclone.applyMatrix4( c.matrixWorld );\n\t\t\tfor ( const key in clone.attributes ) {\n\n\t\t\t\tif ( key !== 'position' ) {\n\n\t\t\t\t\tclone.deleteAttribute( key );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tgeometries.push( clone );\n\n\t\t}\n\n\t} );\n\tconst mergedGeometry = mergeGeometries( geometries, false );\n\tconst mergeTime = window.performance.now() - timeStart;\n\n\tyield;\n\n\t// generate the candidate edges\n\ttimeStart = window.performance.now();\n\n\tlet result = null;\n\tif ( ! params.useWorker ) {\n\n\t\tconst generator = new SilhouetteGenerator();\n\t\tgenerator.iterationTime = runTime;\n\t\tgenerator.output = OUTPUT_BOTH;\n\t\tconst task = generator.generate( mergedGeometry, {\n\n\t\t\tonProgress: ( p, info ) => {\n\n\t\t\t\toutputContainer.innerText = `processing: ${ parseFloat( ( p * 100 ).toFixed( 2 ) ) }%`;\n\n\t\t\t\tconst result = info.getGeometry();\n\t\t\t\tprojection.geometry.dispose();\n\t\t\t\tprojection.geometry = result[ 0 ];\n\t\t\t\tprojectionWireframe.geometry = result[ 0 ];\n\n\t\t\t\tedges.geometry.dispose();\n\t\t\t\tedges.geometry = result[ 1 ];\n\n\t\t\t\tif ( params.displaySilhouette || params.displayWireframe || params.displayOutline ) {\n\n\t\t\t\t\tprojection.geometry.dispose();\n\t\t\t\t\tprojection.geometry = result[ 0 ];\n\t\t\t\t\tprojectionWireframe.geometry = result[ 0 ];\n\n\t\t\t\t\tedges.geometry.dispose();\n\t\t\t\t\tedges.geometry = result[ 1 ];\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t} );\n\n\t\tlet res = task.next();\n\t\twhile ( ! res.done ) {\n\n\t\t\tres = task.next();\n\t\t\tyield;\n\n\t\t}\n\n\t\tresult = res.value;\n\n\t} else {\n\n\t\tworker\n\t\t\t.generate( mergedGeometry, {\n\t\t\t\toutput: OUTPUT_BOTH,\n\t\t\t\tonProgress: p => {\n\n\t\t\t\t\toutputContainer.innerText = `processing: ${ parseFloat( ( p * 100 ).toFixed( 2 ) ) }%`;\n\n\t\t\t\t},\n\t\t\t} )\n\t\t\t.then( res => {\n\n\t\t\t\tresult = res;\n\n\t\t\t} );\n\n\t\twhile ( result === null ) {\n\n\t\t\tyield;\n\n\t\t}\n\n\t}\n\n\tconst trimTime = window.performance.now() - timeStart;\n\tprojection.geometry.dispose();\n\tprojection.geometry = result[ 0 ];\n\tprojectionWireframe.geometry = result[ 0 ];\n\n\tedges.geometry.dispose();\n\tedges.geometry = result[ 1 ];\n\n\toutputContainer.innerText =\n\t\t`merge geometry  : ${ mergeTime.toFixed( 2 ) }ms\\n` +\n\t\t`edge trimming   : ${ trimTime.toFixed( 2 ) }ms\\n` +\n\t\t`triangles       : ${ projection.geometry.index.count / 3 } tris`;\n\n}\n\nfunction render() {\n\n\trequestAnimationFrame( render );\n\n\tif ( task ) {\n\n\t\tconst res = task.next();\n\t\tif ( res.done ) {\n\n\t\t\ttask = null;\n\n\t\t}\n\n\t}\n\n\tmodel.visible = params.displayModel;\n\tprojection.visible = params.displaySilhouette;\n\tprojectionWireframe.visible = params.displayWireframe;\n\tedges.visible = params.displayOutline;\n\trenderer.render( scene, camera );\n\n}\n"],"names":["worker","geometry","GUI","task","result"],"mappings":";;AAGA,MAAM,OAAO;AACN,MAAM,0BAA0B;AAAA,EAEtC,cAAc;AAEb,SAAK,UAAU;AACf,SAAK,SAAS,IAAI,OAAQ,IAAA;AAAA;AAAA,MAAA,KAAA,IAAA,IAAA,sCAAA,YAAA,GAAA,EAAA;AAAA,MAAA,YAAA;AAAA,IAAA,GAA2D,EAAE,MAAM,SAAQ,CAAE;AACvG,SAAK,OAAO,UAAU,OAAK;AAE1B,UAAK,EAAE,SAAU;AAEhB,cAAM,IAAI,MAAO,GAAI,IAAI,6CAA+C,EAAE,OAAO,GAAI;AAAA,MAEtF,OAAO;AAEN,cAAM,IAAI,MAAO,GAAI,IAAI,gCAAiC;AAAA,MAE3D;AAAA,IAED;AAAA,EAED;AAAA,EAEA,SAAU,UAAU,UAAU,IAAK;AAElC,QAAK,KAAK,SAAU;AAEnB,YAAM,IAAI,MAAO,GAAI,IAAI,wBAAyB;AAAA,IAEnD;AAEA,QAAK,KAAK,WAAW,MAAO;AAE3B,YAAM,IAAI,MAAO,GAAI,IAAI,6BAA8B;AAAA,IAExD;AAEA,UAAM,EAAE,QAAAA,QAAM,IAAK;AACnB,SAAK,UAAU;AAEf,WAAO,IAAI,QAAS,CAAE,SAAS,WAAY;AAE1C,MAAAA,QAAO,UAAU,OAAK;AAErB,eAAQ,IAAI,MAAO,GAAI,IAAI,KAAO,EAAE,OAAO,GAAK;AAChD,aAAK,UAAU;AAAA,MAEhB;AAEA,MAAAA,QAAO,YAAY,OAAK;AAEvB,aAAK,UAAU;AACf,cAAM,EAAE,KAAI,IAAK;AAEjB,YAAK,KAAK,OAAQ;AAEjB,iBAAQ,IAAI,MAAO,KAAK,KAAK,CAAE;AAC/B,UAAAA,QAAO,YAAY;AAAA,QAEpB,WAAY,KAAK,QAAS;AAEzB,cAAK,QAAQ,WAAW,aAAc;AAErC,kBAAM,SAAS,KAAK,OAAO,IAAK,UAAQ;AAEvC,oBAAMC,YAAW,IAAI,eAAc;AACnC,cAAAA,UAAS,aAAc,YAAY,IAAI,gBAAiB,KAAK,UAAU,GAAG,MAAO;AACjF,kBAAK,KAAK,OAAQ;AAEjB,gBAAAA,UAAS,SAAU,IAAI,gBAAiB,KAAK,OAAO,GAAG,MAAO;AAAA,cAE/D;AAEA,qBAAOA;AAAA,YAER,CAAC;AAED,oBAAS,MAAM;AAAA,UAEhB,OAAO;AAEN,kBAAMA,YAAW,IAAI,eAAc;AACnC,YAAAA,UAAS,aAAc,YAAY,IAAI,gBAAiB,KAAK,OAAO,UAAU,GAAG,MAAO;AACxF,YAAAA,UAAS,SAAU,IAAI,gBAAiB,KAAK,OAAO,OAAO,GAAG,MAAO;AACrE,oBAASA,SAAQ;AAAA,UAElB;AAEA,UAAAD,QAAO,YAAY;AAAA,QAEpB,WAAY,QAAQ,YAAa;AAEhC,kBAAQ,WAAY,KAAK,QAAQ;AAAA,QAElC;AAAA,MAED;AAEA,YAAM,QAAQ,SAAS,QAAQ,SAAS,MAAM,MAAM,MAAK,IAAK;AAC9D,YAAM,WAAW,SAAS,WAAW,SAAS,MAAM,MAAK;AACzD,YAAM,WAAW,CAAE,SAAS,MAAM;AAClC,UAAK,OAAQ;AAEZ,iBAAS,KAAM,MAAM,MAAM;AAAA,MAE5B;AAEA,MAAAA,QAAO,YAAa;AAAA,QACnB;AAAA,QACA;AAAA,QACA,SAAS;AAAA,UACR,GAAG;AAAA,UACH,YAAY;AAAA,UACZ,0BAA0B,QAAS,QAAQ,UAAU;AAAA,QAC1D;AAAA,MACA,GAAM,QAAQ;AAAA,IAEZ,CAAC;AAAA,EAEF;AAAA,EAEA,UAAU;AAET,SAAK,OAAO,UAAS;AACrB,SAAK,SAAS;AAAA,EAEf;AAED;AC7GA,MAAM,SAAS;AAAA,EACd,mBAAmB;AAAA,EACnB,kBAAkB;AAAA,EAClB,gBAAgB;AAAA,EAChB,cAAc;AAAA,EACd,WAAW;AAAA,EACX,QAAQ,MAAM;AAEb,UAAM,WAAW,OAAM;AACvB,UAAM,SAAS,IAAK,GAAG,GAAG,CAAC;AAC3B,UAAM,kBAAmB,IAAI;AAE7B,UAAM,MAAM,IAAI,KAAI;AACpB,QAAI,cAAe,OAAO,IAAI;AAC9B,QAAI,UAAW,MAAM,QAAQ,EAAG,eAAgB,EAAG;AACnD,UAAM,SAAS,IAAI,KAAK,IAAK,GAAG,CAAE,IAAI,IAAI,CAAC,IAAK;AAAA,EAEjD;AAAA,EACA,YAAY,MAAM;AAEjB,WAAO,YAAW;AAAA,EAEnB;AACD;AAEG,IAAC,UAAU,QAAQ,OAAO;AAC7B,IAAI,OAAO,YAAY,qBAAqB,OAAO;AACnD,IAAI;AACJ,IAAI;AACJ,IAAI,OAAO;AAEX,KAAI;AAEJ,eAAe,OAAO;AAErB,oBAAkB,SAAS,eAAgB,QAAQ;AAEnD,QAAM,UAAU;AAGhB,aAAW,IAAI,cAAe,EAAE,WAAW,KAAI,CAAE;AACjD,WAAS,cAAe,OAAO,gBAAgB;AAC/C,WAAS,QAAS,OAAO,YAAY,OAAO,WAAW;AACvD,WAAS,cAAe,SAAS,CAAC;AAClC,WAAS,KAAK,YAAa,SAAS,UAAU;AAG9C,UAAQ,IAAI,MAAK;AAGjB,QAAM,QAAQ,IAAI,iBAAkB,UAAU,GAAG;AACjD,QAAM,SAAS,IAAK,GAAG,GAAG,CAAC;AAC3B,QAAM,IAAK,KAAK;AAEhB,QAAM,eAAe,IAAI,aAAc,UAAU,GAAG;AACpD,QAAM,IAAK,YAAY;AAGvB,UAAQ,IAAI,MAAK;AACjB,QAAM,SAAS,IAAI;AACnB,QAAM,IAAK,KAAK;AAEhB,UAAQ,IAAI,KAAM,IAAI,kBAAmB,GAAG,KAAK,KAAK,KAAM,IAAI,qBAAsB;AAAA,IACrF,eAAe;AAAA,IACf,qBAAqB;AAAA,IACrB,oBAAoB;AAAA,EACtB,EAAI;AACH,QAAM,SAAS,IAAK,KAAK,KAAK,GAAG,GAAG,KAAK,KAAK,CAAC;AAC/C,QAAM,IAAK,KAAK;AAGhB,eAAa,IAAI,KAAM,QAAW,IAAI,kBAAmB;AAAA,IACxD,OAAO;AAAA,IACP,MAAM;AAAA,IACN,eAAe;AAAA,IACf,qBAAqB;AAAA,IACrB,oBAAoB;AAAA,EACtB,EAAI;AACH,aAAW,SAAS,IAAI;AACxB,QAAM,IAAK,UAAU;AAErB,UAAQ,IAAI,aAAc,QAAW,IAAI,kBAAmB,EAAE,OAAO,EAAC,EAAI;AAC1E,QAAM,SAAS,IAAI;AACnB,QAAM,IAAK,KAAK;AAEhB,wBAAsB,IAAI,KAAM,QAAW,IAAI,kBAAmB,EAAE,OAAO,UAAU,WAAW,KAAI,EAAI;AACxG,sBAAoB,SAAS,IAAI;AACjC,QAAM,IAAK,mBAAmB;AAG9B,WAAS,IAAI,kBAAmB,IAAI,OAAO,aAAa,OAAO,aAAa,MAAM,EAAE;AACpF,SAAO,SAAS,UAAW,GAAG;AAC9B,SAAO,uBAAsB;AAGlB,MAAI,cAAe,QAAQ,SAAS,UAAU;AAEzD,QAAM,IAAIE,EAAG;AACb,MAAI,IAAK,QAAQ,cAAc;AAC/B,MAAI,IAAK,QAAQ,mBAAmB;AACpC,MAAI,IAAK,QAAQ,gBAAgB;AACjC,MAAI,IAAK,QAAQ,kBAAkB;AACnC,MAAI,IAAK,QAAQ,WAAW;AAC5B,MAAI,IAAK,QAAQ,QAAQ;AACzB,MAAI,IAAK,QAAQ,YAAY;AAE7B,WAAS,IAAI,0BAAyB;AAEtC,SAAO,YAAW;AAElB,SAAM;AAEN,SAAO,iBAAkB,UAAU,WAAY;AAE9C,WAAO,SAAS,OAAO,aAAa,OAAO;AAC3C,WAAO,uBAAsB;AAE7B,aAAS,QAAS,OAAO,YAAY,OAAO,WAAW;AAAA,EAExD,GAAG,KAAK;AAET;AAEA,UAAU,YAAa,UAAU,IAAK;AAErC,kBAAgB,YAAY;AAG5B,MAAI,YAAY,OAAO,YAAY,IAAG;AACtC,QAAM,aAAa,CAAA;AACnB,QAAM,kBAAmB,MAAM,IAAI;AACnC,QAAM,SAAU,OAAK;AAEpB,QAAK,EAAE,UAAW;AAEjB,YAAM,QAAQ,EAAE,SAAS,MAAK;AAC9B,YAAM,aAAc,EAAE,WAAW;AACjC,iBAAY,OAAO,MAAM,YAAa;AAErC,YAAK,QAAQ,YAAa;AAEzB,gBAAM,gBAAiB,GAAG;AAAA,QAE3B;AAAA,MAED;AAEA,iBAAW,KAAM,KAAK;AAAA,IAEvB;AAAA,EAED,CAAC;AACD,QAAM,iBAAiB,gBAAiB,YAAY,KAAK;AACzD,QAAM,YAAY,OAAO,YAAY,IAAG,IAAK;AAE7C;AAGA,cAAY,OAAO,YAAY,IAAG;AAElC,MAAI,SAAS;AACb,MAAK,CAAE,OAAO,WAAY;AAEzB,UAAM,YAAY,IAAI,oBAAmB;AACzC,cAAU,gBAAgB;AAC1B,cAAU,SAAS;AACnB,UAAMC,QAAO,UAAU,SAAU,gBAAgB;AAAA,MAEhD,YAAY,CAAE,GAAG,SAAU;AAE1B,wBAAgB,YAAY,eAAgB,YAAc,IAAI,KAAM,QAAS,CAAC,CAAE,CAAE;AAElF,cAAMC,UAAS,KAAK,YAAW;AAC/B,mBAAW,SAAS,QAAO;AAC3B,mBAAW,WAAWA,QAAQ,CAAC;AAC/B,4BAAoB,WAAWA,QAAQ,CAAC;AAExC,cAAM,SAAS,QAAO;AACtB,cAAM,WAAWA,QAAQ,CAAC;AAE1B,YAAK,OAAO,qBAAqB,OAAO,oBAAoB,OAAO,gBAAiB;AAEnF,qBAAW,SAAS,QAAO;AAC3B,qBAAW,WAAWA,QAAQ,CAAC;AAC/B,8BAAoB,WAAWA,QAAQ,CAAC;AAExC,gBAAM,SAAS,QAAO;AACtB,gBAAM,WAAWA,QAAQ,CAAC;AAAA,QAE3B;AAAA,MAED;AAAA,IAEH,CAAG;AAED,QAAI,MAAMD,MAAK,KAAI;AACnB,WAAQ,CAAE,IAAI,MAAO;AAEpB,YAAMA,MAAK,KAAI;AACf;AAAA,IAED;AAEA,aAAS,IAAI;AAAA,EAEd,OAAO;AAEN,WACE,SAAU,gBAAgB;AAAA,MAC1B,QAAQ;AAAA,MACR,YAAY,OAAK;AAEhB,wBAAgB,YAAY,eAAgB,YAAc,IAAI,KAAM,QAAS,CAAC,CAAE,CAAE;AAAA,MAEnF;AAAA,IACJ,CAAI,EACA,KAAM,SAAO;AAEb,eAAS;AAAA,IAEV,CAAC;AAEF,WAAQ,WAAW,MAAO;AAEzB;AAAA,IAED;AAAA,EAED;AAEA,QAAM,WAAW,OAAO,YAAY,IAAG,IAAK;AAC5C,aAAW,SAAS,QAAO;AAC3B,aAAW,WAAW,OAAQ,CAAC;AAC/B,sBAAoB,WAAW,OAAQ,CAAC;AAExC,QAAM,SAAS,QAAO;AACtB,QAAM,WAAW,OAAQ,CAAC;AAE1B,kBAAgB,YACf,qBAAsB,UAAU,QAAS,CAAC,CAAE;AAAA,oBACtB,SAAS,QAAS,CAAC,CAAE;AAAA,oBACrB,WAAW,SAAS,MAAM,QAAQ,CAAC;AAE3D;AAEA,SAAS,SAAS;AAEjB,wBAAuB,MAAM;AAE7B,MAAK,MAAO;AAEX,UAAM,MAAM,KAAK,KAAI;AACrB,QAAK,IAAI,MAAO;AAEf,aAAO;AAAA,IAER;AAAA,EAED;AAEA,QAAM,UAAU,OAAO;AACvB,aAAW,UAAU,OAAO;AAC5B,sBAAoB,UAAU,OAAO;AACrC,QAAM,UAAU,OAAO;AACvB,WAAS,OAAQ,OAAO,MAAM;AAE/B;"}